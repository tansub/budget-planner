function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=globalThis,a={},n={},r=t.parcelRequire94c2;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire94c2=r),(0,r.register)("8zRAg",function(t,a){e(t.exports,"fetchTotalExpenses",()=>w),e(t.exports,"fetchBudget",()=>b),e(t.exports,"fetchExpenses",()=>h);var n=r("gEjZb"),o=r("ilpIi");let l=document.getElementById("total-amount"),c=document.getElementById("user-amount"),i=document.getElementById("category-select"),d=document.getElementById("check-amount"),s=document.getElementById("change-expense"),u=document.getElementById("total-amount-button"),p=document.getElementById("product-title"),g=document.getElementById("amount"),m=document.getElementById("expenditure-value"),y=document.getElementById("balance-amount"),x=document.getElementById("list"),E=0,v=0;u.addEventListener("click",async()=>{if(isNaN(E=parseInt(l.value))||E<=0){alert("Please enter a valid total amount.");return}try{await (0,o.setDoc)((0,o.doc)(n.db,"budget","current"),{totalBudget:E,currentBalance:E-await w()}),g.innerHTML=E,y.innerText=E-v,l.value=""}catch(e){console.error("Error saving budget to Firestore:",e)}});let b=async()=>{try{let e=await (0,o.getDoc)((0,o.doc)(n.db,"budget","current"));if(e.exists()){let t=e.data();g.innerHTML=t.totalBudget,y.innerText=t.currentBalance,m.innerText=t.totalExpenses,E=t.totalBudget}}catch(e){console.error("Error fetching budget from Firestore:",e)}},f=e=>{document.querySelectorAll(".edit").forEach(t=>t.disabled=e)},w=async()=>{try{let e=(0,o.query)((0,o.collection)(n.db,"expenses")),t=await (0,o.getDocs)(e),a=0;return t.forEach(e=>{let t=e.data(),n=parseFloat(t.amount);isNaN(n)||(a+=n)}),v=a,m.innerHTML=v,y.innerText=E-v,v}catch(e){return console.error("Error fetching total expenses:",e),v=0,m.innerText=v,y.innerText=E,0}},h=async()=>{try{let e=(0,o.query)((0,o.collection)(n.db,"expenses"),(0,o.orderBy)("createdAt","desc")),t=await (0,o.getDocs)(e);x.innerHTML="",t.forEach(e=>{let t=e.data();B(e.id,t.title,t.amount,t.category||"Uncategorized")})}catch(e){console.error("Error fetching expenses:",e)}},B=(e,t,a,n)=>{let r=document.createElement("div");r.classList.add("sublist-content","flex-space"),r.innerHTML=`<p class="product">${t}</p><p class="amount">${a}</p><p class="category">${n}</p>`;let o=document.createElement("button");o.classList.add("fa-solid","fa-pen-to-square","edit"),o.setAttribute("aria-label","Edit expense"),o.addEventListener("click",()=>{L(e,t,a,n)});let l=document.createElement("button");l.classList.add("fa-solid","fa-trash-can","delete"),o.setAttribute("aria-label","Delete expense"),l.addEventListener("click",()=>T(e)),r.append(o,l),x.appendChild(r)};d.addEventListener("click",async()=>{if(!c.value||!p.value){alert("Please fill in the details.");return}f(!1);let e=parseInt(c.value),t=await w()+e;y.innerText=E-t,m.innerText=t,B(p.value,c.value,i.value),await I(p.value,e,i.value),p.value="",c.value="",i.value=""});let I=async(e,t,a)=>{try{if(isNaN(t)||t<=0){console.error("Invalid amount:",t),alert("Please enter a valid expense amount.");return}let r=await (0,o.addDoc)((0,o.collection)(n.db,"expenses"),{title:e,amount:t,category:a||"Uncategorized",createdAt:new Date().toISOString()});await (0,o.updateDoc)((0,o.doc)(n.db,"expenses",r.id),{id:r.id}),await h(),await w()}catch(e){console.error("Error adding expense to Firestore:",e)}},L=async(e,t,a,r)=>{s.style.display="inline",p.value=t,c.value=a,i.value=r||"Uncategorized",d.disabled=!0,s.addEventListener("click",async()=>{try{await (0,o.updateDoc)((0,o.doc)(n.db,"expenses",e),{title:p.value,amount:parseFloat(c.value),category:i.value||"Uncategorized"}),await h(),await w(),s.style.display="none",d.disabled=!1}catch(e){console.error("Error updating expense:",e)}})},T=async e=>{try{await (0,o.deleteDoc)((0,o.doc)(n.db,"expenses",e)),await w(),await h()}catch(e){console.error("Error deleting expense:",e)}};window.addEventListener("DOMContentLoaded",async()=>{await b(),await h(),await w()})}),r("8zRAg");
//# sourceMappingURL=index.df5dc8be.js.map
